<!-- filepath: c:\Users\EB001067311\Desktop\shopify\sections\c_HEADER.liquid -->
<link rel="stylesheet" href="{{ 'i_custom-menu.css' | asset_url }}">
<nav role="navigation">
  <button class="menu-toggle" aria-label="Toggle menu">☰</button>
  <ul class="parent-menu">
    <button class="menu-close" aria-label="Close menu">✖</button>
    {%- for link in linklists[section.settings.menu].links -%}
      {% assign label_parts = link.title | split: '[' %}
      {% assign menu_label = label_parts[0] %}
      {% assign image_url = label_parts[1] | remove: ']' %}
      <li class="parent-link">
        <a
          href="{{ link.url }}"
          data-image="{{ image_url }}"
          {% if link.active %}
            aria-current="page"
          {% endif %}
        >
          {{ menu_label }}
        </a>
        {% if link.settings.show_mega_menu %}
          <div class="sub-menu">
            {% if image_url %}
              <img src="{{ image_url }}" alt="Submenu Image" class="submenu-image">
            {% endif %}
            {%- if link.links != blank -%}
              <ul class="child-menu1">
                {%- for child_link in link.links -%}
                  {% assign child_label_parts = child_link.title | split: '[' %}
                  {% assign child_menu_label = child_label_parts[0] %}
                  {% assign child_image_url = child_label_parts[1] | remove: ']' %}
                  <li class="layer1">
                    <a
                      href="{{ child_link.url }}"
                      data-image="{{ child_image_url }}"
                      data-parent-image="{{ image_url }}"
                      {% if child_link.active %}
                        aria-current="page"
                      {% endif %}
                    >
                      {{ child_menu_label }}
                    </a>
                    {%- if child_link.links != blank -%}
                      <ul class="child-menu2">
                        {%- for grandchild_link in child_link.links -%}
                          {% assign grandchild_label_parts = grandchild_link.title | split: '[' %}
                          {% assign grandchild_menu_label = grandchild_label_parts[0] %}
                          {% assign grandchild_image_url = grandchild_label_parts[1] | remove: ']' %}
                          <li class="layer2">
                            <a
                              href="{{ grandchild_link.url }}"
                              data-image="{{ grandchild_image_url }}"
                              data-parent-image="{{ child_image_url | default: image_url }}"
                              {% if grandchild_link.active %}
                                aria-current="page"
                              {% endif %}
                            >
                              {{ grandchild_menu_label }}
                            </a>
                          </li>
                        {%- endfor -%}
                      </ul>
                    {%- endif -%}
                  </li>
                {%- endfor -%}
              </ul>
            {%- endif -%}
          </div>
        {% endif %}
      </li>
    {%- endfor -%}
  </ul>
</nav>
<script src="{{ 'i_menu-toggle.js' | asset_url }}" defer></script>

{% schema %}
{
  "name": "Mega-Header",
  "settings": [
    {
      "type": "link_list",
      "id": "menu",
      "label": "Menu"
    }
  ],
  "blocks": [
    {
      "type": "link",
      "name": "Navigation Link",
      "settings": [
        {
          "type": "text",
          "id": "link_name",
          "label": "Link Name",
          "default": "Home"
        },
        {
          "type": "url",
          "id": "link_url",
          "label": "Link URL",
          "default": "/"
        },
        {
          "type": "checkbox",
          "id": "show_mega_menu",
          "label": "Show Mega Menu"
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "Custom-Mega-Header"
    }
  ]
}
{% endschema %}